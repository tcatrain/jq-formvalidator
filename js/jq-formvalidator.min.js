!function(a){a.fn.formValidator=function(t){var n=a.extend({validateOnBlur:!0,validateOnSubmit:!0,validateOnKeyUp:!1,validateOnKeyDown:!1,validateOnFocus:!1,trimValues:!0,replaceWithTrimedValues:!0,keepValueIfWrong:!0,onValidationSuccess:a(this)._onValidationSuccess,onValidationError:a(this)._onValidationError,afterFormValidationSuccess:null,afterFormValidationError:null},t);a(this).filter("form").each(function(){a(this)._listen(n),a(this).find("input[data-jqfmv]").each(function(){a(this)._listen(n)})})},a.fn.validate=function(t){return a(this).is("form")?a(this)._validateForm(t):a(this)._validateInput(t)},a.fn._validateForm=function(t){var n=[],r=a(this).filter("form");return r.length&&a(r).each(function(){a(this).find("input[data-jqfmv]").each(function(){n[a(this).attr("name")]=a(this)._validateInput(t)[a(this).attr("name")]})}),n},a.fn._validateInput=function(t){var n=[],r=a(this).filter("input[data-jqfmv]");return r.each(function(){var r=a(this),e=r.data("jqfmv").split(",");n[r.attr("name")]=[],a(e).each(function(){var e=a.jqfmv.validators.validate(this,r,t);0!=e.length&&(a(e).each(function(){n[r.attr("name")].push(this)}),t.keepValueIfWrong===!1&&r.val(""))})}),n},a.fn._listen=function(t){if(a(this).is("form")){var n=a(this);t.validateOnBlur&&n.on("submit",a.proxy(n._onFormEventTrigger,n,t))}else{var r=a(this);t.validateOnBlur&&r.on("blur",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnKeyUp&&r.on("keyup",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnKeyDown&&r.on("keydown",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnFocus&&r.on("focus",a.proxy(r._onInputEventTrigger,r,t))}},a.fn._onFormEventTrigger=function(t,n){n.preventDefault();var r=this.validate(t),e=!0;this.find("input[data-jqfmv]").each(function(){r[a(this).attr("name")].length>0?(t.onValidationError(a(this),r[a(this).attr("name")]),e=!1):t.onValidationSuccess(a(this))}),e===!0&&null!==t.afterFormValidationSuccess?t.afterFormValidationSuccess(t):e===!1&&null!==t.afterFormValidationError&&t.afterFormValidationError(t)},a.fn._onInputEventTrigger=function(a){var t=this.validate(a);t[this.attr("name")].length?a.onValidationError(this,t[this.attr("name")],a):a.onValidationSuccess(this,a)},a.fn._onValidationSuccess=function(a){var t=a.next("span.success, span.error"),n='<span class="success">&#10004;</span>';t.length>0?t.replaceWith(n):a.after(n)},a.fn._onValidationError=function(t,n){var r=t.next("span.success, span.error"),e='<span class="error" title="'.concat(a(t).attr("name")+" : "+n).concat('">&#10008;</span>');r.length>0?r.replaceWith(e):t.after(e)},a.jqfmv={validators:{_validators:{},add:function(a){this._validators[a.name]=a.handler},validate:function(t,n,r){return a.jqfmv.validators._validators[t](this._value(n,r),this._against(t,n),r)},_value:function(a,t){var n;switch(a.attr("type")){case"radio":case"checkbox":var r=a.filter(":checked");n=r.length>0?r.val():null;break;case"text":case"password":n=t.trimValues===!0?a.val().trim():a.val(),t.trimValues===!0&&t.replaceWithTrimedValues===!0&&a.val(n);break;default:throw"Unsupported field type "+a.type}return n},_against:function(a,t){return t.data("jqfmv-"+a)},_core:{_mandatoryValidator:function(a){var t=[];return(null===a||0===a.length)&&t.push("JQFMV_MANDATORY_ERROR"),t},_lengthValidator:function(a,t){var n=[];if(null===a||0===a.length)return n;var r=t.split(","),e=r[1].length,i="]"==r[0].charAt(0)?1:0,l="["==r[1].charAt(e-1)?-1:0,o=r[0].length?window.parseInt(r[0].slice(1))+i:null,s=r[1].length?window.parseInt(r[1].slice(0,e-1))+l:null;return null!==o&&a.length<o&&n.push("JQFMV_LENGTH_MIN_ERROR"),null!==s&&a.length>s&&n.push("JQFMV_LENGTH_MAX_ERROR"),n},_exprValidator:function(a,t){var n=[];return null===a||0===a.length?n:(null===a.match(t)&&n.push("JQFMV_EXPR_MATCH_ERROR"),n)},_alphabeticValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^[A-Za-z]+$/)&&t.push("JQFMV_ALPHABETIC_MATCH_ERROR"),t)},_emailValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)&&t.push("JQFMV_EMAIL_MATCH_ERROR"),t)},_numberValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^(\+|\-)?[0-9]+((\.|,)[0-9]+)?$/)&&t.push("JQFMV_NUMBER_MATCH_ERROR"),t)},_integerValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^(\+|\-)?[0-9]+$/)&&t.push("JQFMV_INTEGER_MATCH_ERROR"),t)},_phoneValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^\+?[0-9 ]{5,20}$/)&&t.push("JQFMV_PHONE_MATCH_ERROR"),t)},_checklistValidator:function(t,n){var r=[];if(null===t||0===t.length)return r;var e=n.split(",");return-1===a.inArray(t,e)&&r.push("JQFMV_CHECKLIST_MATCH_ERROR"),r},_consistencyValidator:function(t,n){var r=[],e=a("#"==n.charAt(0)?n:'input[name="'+n+'"');return(null===e||t!==e.val())&&r.push("JQFMV_CONSISTENCY_FAILED_ERROR"),r},_formatValidator:function(t,n){var r=[];return a.inArray(n,a.jqfmv.validators._validators)?r=r.concat(a.jqfmv.validators._validators[n](t)):r.push("JQFMV_UNKNOWN_FORMAT_ERROR"),r}}}},a.jqfmv.validators.add({name:"length",handler:a.jqfmv.validators._core._lengthValidator}),a.jqfmv.validators.add({name:"mandatory",handler:a.jqfmv.validators._core._mandatoryValidator}),a.jqfmv.validators.add({name:"expr",handler:a.jqfmv.validators._core._exprValidator}),a.jqfmv.validators.add({name:"alphabetic",handler:a.jqfmv.validators._core._alphabeticValidator}),a.jqfmv.validators.add({name:"email",handler:a.jqfmv.validators._core._emailValidator}),a.jqfmv.validators.add({name:"number",handler:a.jqfmv.validators._core._numberValidator}),a.jqfmv.validators.add({name:"integer",handler:a.jqfmv.validators._core._integerValidator}),a.jqfmv.validators.add({name:"phone",handler:a.jqfmv.validators._core._phoneValidator}),a.jqfmv.validators.add({name:"checklist",handler:a.jqfmv.validators._core._checklistValidator}),a.jqfmv.validators.add({name:"consistency",handler:a.jqfmv.validators._core._consistencyValidator}),a.jqfmv.validators.add({name:"format",handler:a.jqfmv.validators._core._formatValidator})}(jQuery);