!function(a){a.fn.formValidator=function(t){var n=a.extend({validateOnBlur:!0,validateOnSubmit:!0,validateOnKeyUp:!1,validateOnKeyDown:!1,validateOnFocus:!1,trimValues:!0,replaceWithTrimedValues:!0,keepValueIfWrong:!0,onValidationSuccess:a(this)._onValidationSuccess,onValidationError:a(this)._onValidationError},t);a(this).filter("form").each(function(){a(this)._listen(n),a(this).find("input[jqfmv-validators]").each(function(){a(this)._listen(n)})})},a.fn.validate=function(t){return a(this).is("form")?a(this)._validateForm(t):a(this)._validateInput(t)},a.fn._validateForm=function(t){var n=[],r=a(this).filter("form");return r.length&&a(r).each(function(){a(this).find("input[jqfmv-validators]").each(function(){n[a(this).attr("name")]=a(this)._validateInput(t)[a(this).attr("name")]})}),n},a.fn._validateInput=function(t){var n=[],r=a(this).filter("input[jqfmv-validators]");return console.info(this),r.each(function(){var r=a(this),i=(r.val(),r.attr("jqfmv-validators").split(","));n[r.attr("name")]=[],a(i).each(function(){var i=a.jqfmv.validators.validate(this,r,t);0!=i.length&&(a(i).each(function(){n[r.attr("name")].push(this)}),t.keepValueIfWrong===!1&&r.val(""))})}),n},a.fn._listen=function(t){a(this).filter("form");if(a(this).is("form")){var n=a(this);t.validateOnBlur&&n.on("submit",a.proxy(n._onFormEventTrigger,n,t))}else{var r=a(this);t.validateOnBlur&&r.on("blur",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnKeyUp&&r.on("keyup",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnKeyDown&&r.on("keydown",a.proxy(r._onInputEventTrigger,r,t)),t.validateOnFocus&&r.on("focus",a.proxy(r._onInputEventTrigger,r,t))}},a.fn._onFormEventTrigger=function(t,n){n.preventDefault();var r=this.validate(t);this.find("input[jqfmv-validators]").each(function(){r[a(this).attr("name")].length>0?t.onValidationError(a(this),r[a(this).attr("name")]):t.onValidationSuccess(a(this))})},a.fn._onInputEventTrigger=function(a){var t=this.validate(a);t[this.attr("name")].length?a.onValidationError(this,t[this.attr("name")]):a.onValidationSuccess(this)},a.fn._onValidationSuccess=function(a){a.css("backgroundColor","green")},a.fn._onValidationError=function(t,n){t.css("backgroundColor","red"),console.debug(a(t).attr("name")+" : "+n)},a.jqfmv={validators:{_validators:{},add:function(a){this._validators[a.name]=a.handler},validate:function(t,n,r){var i=r.trimValues===!0?n.val().trim():n.val();return r.trimValues===!0&&r.replaceWithTrimedValues===!0&&n.val(i),a.jqfmv.validators._validators[t](i,this._against(t,n),r)},_against:function(a,t){return t.attr("jqfmv-against-"+a)},_core:{_mandatoryValidator:function(a){var t=[];return(null===a||0===a.length)&&t.push("JQFMV_MANDATORY_ERROR"),t},_lengthValidator:function(a,t){var n=[];if(null===a||0===a.length)return n;var r=t.split(","),i=r[0].length?window.parseInt(r[0]):null,e=r[1].length?window.parseInt(r[1]):null;return null!==i&&a.length<i&&n.push("JQFMV_LENGTH_MIN_ERROR"),null!==e&&a.length>e&&n.push("JQFMV_LENGTH_MAX_ERROR"),n},_exprValidator:function(a,t){var n=[];return null===a||0===a.length?n:(null===a.match(t)&&n.push("JQFMV_EXPR_MATCH_ERROR"),n)},_emailValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)&&t.push("JQFMV_EMAIL_MATCH_ERROR"),t)},_numberValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^(\+|\-)?[0-9]+((\.|,)[0-9]+)?$/)&&t.push("JQFMV_NUMBER_MATCH_ERROR"),t)},_integerValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^(\+|\-)?[0-9]+$/)&&t.push("JQFMV_INTEGER_MATCH_ERROR"),t)},_phoneValidator:function(a){var t=[];return null===a||0===a.length?t:(null===a.match(/^\+?[0-9 ]{5,20}$/)&&t.push("JQFMV_PHONE_MATCH_ERROR"),t)},_checklistValidator:function(t,n){var r=[];if(null===t||0===t.length)return r;var i=n.split(",");return-1===a.inArray(t,i)&&r.push("JQFMV_CHECKLIST_MATCH_ERROR"),r},_consistencyValidator:function(t,n){var r=[],i=a("#"==n.charAt(0)?n:'input[name="'+n+'"');return(null===i||t!==i.val())&&r.push("JQFMV_CONSISTENCY_FAILED_ERROR"),r},_formatValidator:function(t,n){var r=[];return a.inArray(n,a.jqfmv.validators._validators)?r=r.concat(a.jqfmv.validators._validators[n](t)):r.push("JQFMV_UNKNOWN_FORMAT_ERROR"),r}}}},a.jqfmv.validators.add({name:"length",handler:a.jqfmv.validators._core._lengthValidator}),a.jqfmv.validators.add({name:"mandatory",handler:a.jqfmv.validators._core._mandatoryValidator}),a.jqfmv.validators.add({name:"expr",handler:a.jqfmv.validators._core._exprValidator}),a.jqfmv.validators.add({name:"email",handler:a.jqfmv.validators._core._emailValidator}),a.jqfmv.validators.add({name:"number",handler:a.jqfmv.validators._core._numberValidator}),a.jqfmv.validators.add({name:"integer",handler:a.jqfmv.validators._core._integerValidator}),a.jqfmv.validators.add({name:"phone",handler:a.jqfmv.validators._core._phoneValidator}),a.jqfmv.validators.add({name:"checklist",handler:a.jqfmv.validators._core._checklistValidator}),a.jqfmv.validators.add({name:"consistency",handler:a.jqfmv.validators._core._consistencyValidator}),a.jqfmv.validators.add({name:"format",handler:a.jqfmv.validators._core._formatValidator})}(jQuery);